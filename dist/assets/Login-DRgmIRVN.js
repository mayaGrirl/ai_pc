import{d as y,u as x,c as M,w as _,a as c,f as e,g as u,l as C,r as b,t as i,m as p,v as f,z as V,y as r,p as L,A as B,q as N,e as T,x as R,b as S}from"./index-QH1ZnBgf.js";import{u as U,M as q,l as A}from"./MainLayout-C6zwKqtA.js";import{_ as D}from"./_plugin-vue_export-helper-DlAUqK2U.js";const E={class:"login-page"},F={class:"login-container"},I={class:"login-form"},P={key:0,class:"error-message"},z={class:"form-group"},j={class:"input-wrapper"},G=["placeholder"],H={class:"form-group"},J={class:"input-wrapper"},K=["placeholder"],O={class:"form-options"},Q={class:"checkbox-label"},W={class:"button-group"},X=["disabled"],Y={key:0,class:"loading-spinner"},Z={key:1},$=y({__name:"Login",setup(ee){const{t:s}=x(),m=S(),v=R(),g=U(),d=b(!1),n=b(""),t=V({mobile:"",password:"",rememberMe:!1}),h=async()=>{if(n.value="",!t.mobile){n.value=s("login.inputMobile");return}if(!t.password){n.value=s("login.inputPassword");return}if(t.password.length<6){n.value=s("login.passwordError");return}d.value=!0;try{const a=await A({mobile:t.mobile,password:t.password,type:1});if(a.code===200&&a.data){g.setToken(a.data.access_token,a.data.token_type,a.data.expires_at),await g.fetchCurrentCustomer();const o=v.query.redirect||"/";m.push(o)}else n.value=a.message||s("login.loginFailed")}catch(a){console.error("Login error:",a),n.value=s("login.loginFailed")}finally{d.value=!1}},w=()=>{m.push("/register")};return(a,o)=>{const k=T("router-link");return c(),M(q,null,{default:_(()=>[e("div",E,[e("div",F,[o[5]||(o[5]=e("h1",{class:"page-title"},"ç™» å½•",-1)),e("div",I,[n.value?(c(),u("div",P,i(n.value),1)):C("",!0),e("div",z,[e("div",j,[o[3]||(o[3]=e("span",{class:"input-icon"},"ðŸ“±",-1)),p(e("input",{"onUpdate:modelValue":o[0]||(o[0]=l=>t.mobile=l),type:"text",placeholder:r(s)("login.mobile"),maxlength:"11"},null,8,G),[[f,t.mobile]])])]),e("div",H,[e("div",J,[o[4]||(o[4]=e("span",{class:"input-icon"},"ðŸ”’",-1)),p(e("input",{"onUpdate:modelValue":o[1]||(o[1]=l=>t.password=l),type:"password",placeholder:r(s)("login.password")},null,8,K),[[f,t.password]])])]),e("div",O,[e("label",Q,[p(e("input",{"onUpdate:modelValue":o[2]||(o[2]=l=>t.rememberMe=l),type:"checkbox"},null,512),[[B,t.rememberMe]]),e("span",null,i(r(s)("login.rememberMe"))+"ï¼ˆä¸æ˜¯è‡ªå·±çš„ç”µè„‘ä¸è¦å‹¾é€‰ï¼‰",1)]),L(k,{to:"/forgot-password",class:"forgot-link"},{default:_(()=>[N(i(r(s)("login.forgotPassword"))+"? ",1)]),_:1})]),e("div",W,[e("button",{type:"button",class:"btn-submit",disabled:d.value,onClick:h},[d.value?(c(),u("span",Y)):(c(),u("span",Z,i(r(s)("common.login")),1))],8,X),e("button",{type:"button",class:"btn-register",onClick:w},i(r(s)("common.register")),1)])])])])]),_:1})}}}),ae=D($,[["__scopeId","data-v-c83e55eb"]]);export{ae as default};
