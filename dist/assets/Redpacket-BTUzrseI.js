import{d as u,x as b,w as g,e as t,c as _,h,v as y,C as s,E as v,b as w,t as k,g as E,B as S,k as B,p as i}from"./index-hWKOlkWM.js";import{U as C}from"./UserLayout-CFmo2CmG.js";import{o as M,s as T,u as U,a as V,E as A,t as D}from"./vee-validate-zod-C_p6w5cU.js";import{A as F}from"./customer-DIYUO1RJ.js";import"./MainLayout-DtU7OwZM.js";const N={class:"flex flex-col gap-5"},R={class:"flex gap-[1px] flex-col"},j={class:"relative flex items-center gap-1"},z=["disabled"],H=u({__name:"Redpacket",setup(K){const l=S(),c=B(1),p=M({code:T().min(1,"请输入红包码").max(20,"最大只能输入20位").regex(/^[a-zA-Z0-9]+$/,"无效的红包码, 只能输入数字+字母")}),f=D(p),{handleSubmit:x,isSubmitting:a}=U({validationSchema:f}),{value:n}=V("code"),d=x(async(r,{setErrors:e})=>{a.value=!0;try{const{code:o,message:m}=await F({code:r==null?void 0:r.code});o!==200?l.error(m):l.success("提交成功")}catch(o){l.error(o.message||"提交失败")}finally{a.value=!1}});return(r,e)=>(i(),b(C,null,{default:g(()=>[t("div",N,[e[3]||(e[3]=t("div",{class:"flex gap-5 border-b border-[#eee] pb-[15px]"},[t("span",{class:"text-sm cursor-pointer pb-3 border-b-2 border-transparent -mb-4 text-[#ff6600] border-b-[#ff6600]"},"我的红包")],-1)),(i(),_("form",{onSubmit:e[1]||(e[1]=E((...o)=>s(d)&&s(d)(...o),["prevent"])),class:"flex flex-col gap-6",key:c.value},[t("div",R,[e[2]||(e[2]=t("label",{class:"text-[15px] font-medium text-[#333333]",for:"code"},"输入红包码",-1)),t("div",j,[h(t("input",{id:"code",type:"text","onUpdate:modelValue":e[0]||(e[0]=o=>v(n)?n.value=o:null),placeholder:"请输入红包码",class:"px-4 py-[14px] border-2 border-gray-200 rounded-lg text-[15px] transition-all duration-300 outline-none focus:border-[#667eea] focus:shadow-[0_0_0_3px_rgba(102,126,234,0.1)] flex-1 min-w-0 text-gray-600 placeholder-gray-400 focus:outline-none",autocomplete:"off",spellcheck:"false"},null,512),[[y,s(n)]])]),w(s(A),{name:"code",class:"text-[#ff4d4f] text-sm"})]),t("button",{type:"submit",disabled:s(a),class:"mt-4 p-4 bg-gradient-to-br from-[#ff6b6b] to-[#ee5a6f] text-white rounded-xl text-[18px] font-bold cursor-pointer transition-all duration-300 shadow-[0_4px_12px_rgba(255,107,107,0.3)] hover:-translate-y-[2px] hover:shadow-[0_6px_16px_rgba(255,107,107,0.4)] active:translate-y-0 disabled:opacity-60 disabled:cursor-not-allowed"},k(s(a)?"提交中...":"提交"),9,z)],32))])]),_:1}))}});export{H as default};
