import{d as q,u as K,D as f,a as _,c as a,F as h,f as c,n as g,r as m,t as x,B as b,p as i}from"./index-GTHveaWT.js";import{h as w}from"./customer-BGozHksy.js";const S=["value"],k=["disabled"],T={key:0},B={key:1},I={key:2},V=60,D=q({__name:"receive-sms",props:{scene:{},modelValue:{},disabled:{type:Boolean}},emits:["update:modelValue"],setup(s,{emit:r}){const u=b(),p=s,d=r,{t:N}=K(),o=m(0),n=m(!1);let l=null;f(o,e=>{e<=0||(l=window.setTimeout(()=>{o.value--},1e3))}),_(()=>{l&&clearTimeout(l)});const v=async()=>{if(!(n.value||o.value>0)){n.value=!0;try{const{code:e,message:t}=await w(p.scene);e!==200?u.error(t):(u.success("发送成功"),o.value=V)}catch(e){const t=(e==null?void 0:e.message)||"发送失败，请稍后再试";u.error(t)}finally{n.value=!1}}},y=e=>{const t=e.target.value;d("update:modelValue",t)};return(e,t)=>(i(),a(h,null,[c("input",{id:"verify_code",value:s.modelValue,onInput:y,type:"text",inputmode:"numeric",pattern:"[0-9]*",autocomplete:"one-time-code",placeholder:"请输入验证码",class:"px-4 py-[14px] border-2 border-gray-200 rounded-lg text-[15px] transition-all duration-300 outline-none focus:border-[#667eea] focus:shadow-[0_0_0_3px_rgba(102,126,234,0.1)] flex-1 min-w-0 text-gray-600 placeholder-gray-400 focus:outline-none"},null,40,S),c("button",{type:"button",disabled:s.disabled||n.value||o.value>0,onClick:v,class:g(["shrink-0 h-8 px-3 rounded text-xs whitespace-nowrap transition",s.disabled||n.value||o.value>0?"bg-gray-600 text-white cursor-not-allowed":"bg-blue-600 text-white active:scale-95 cursor-pointer"])},[n.value?(i(),a("span",T,"发送中...")):o.value>0?(i(),a("span",B,x(o.value)+"s ",1)):(i(),a("span",I,"发送验证码"))],10,k)],64))}}),E=[{value:1,i18nKey:"common.question-options.1"},{value:2,i18nKey:"common.question-options.2"},{value:3,i18nKey:"common.question-options.3"},{value:4,i18nKey:"common.question-options.4"},{value:5,i18nKey:"common.question-options.5"},{value:6,i18nKey:"common.question-options.6"},{value:7,i18nKey:"common.question-options.7"},{value:8,i18nKey:"common.question-options.8"},{value:9,i18nKey:"common.question-options.9"},{value:10,i18nKey:"common.question-options.10"},{value:11,i18nKey:"common.question-options.11"},{value:12,i18nKey:"common.question-options.12"},{value:13,i18nKey:"common.question-options.13"},{value:14,i18nKey:"common.question-options.14"},{value:15,i18nKey:"common.question-options.15"},{value:16,i18nKey:"common.question-options.16"},{value:17,i18nKey:"common.question-options.17"},{value:18,i18nKey:"common.question-options.18"},{value:19,i18nKey:"common.question-options.19"}];export{E as S,D as _};
