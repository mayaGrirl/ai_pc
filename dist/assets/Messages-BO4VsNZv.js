import{d as v,o as g,r as c,x as h,w as b,g as n,f as e,p as u,D as p,c as d,e as y,j as k,t as r,F as x}from"./index-DQGUWJIM.js";import{U as C}from"./UserLayout-DBXWqJRQ.js";import{j as M}from"./MainLayout-DIJluQjy.js";import{_ as U}from"./_plugin-vue_export-helper-DlAUqK2U.js";const V={class:"messages-page"},w={class:"message-table"},B={class:"col-checkbox"},D={class:"col-checkbox"},F=["onUpdate:modelValue"],S={class:"col-title"},j={class:"col-from"},A={class:"col-time"},E={key:0},L=v({__name:"Messages",setup(N){const a=c([]),i=c(!0),o=c(!1);g(async()=>{try{const s=await M({pagination:{page:1,size:20}});s.code===200&&s.data&&(a.value=s.data.map(t=>({id:t.id,title:t.title,from:t.from||"系统",time:t.created_at||t.time,selected:!1})))}catch(s){console.error("Failed to load messages:",s)}finally{i.value=!1}});const m=()=>{a.value.forEach(s=>{s.selected=o.value})},f=()=>{a.value=a.value.filter(s=>!s.selected),o.value=!1};return(s,t)=>(n(),h(C,null,{default:b(()=>[e("div",V,[t[5]||(t[5]=e("div",{class:"page-tabs"},[e("span",{class:"tab active"},"消息中心")],-1)),e("div",{class:"action-bar"},[e("button",{class:"btn-delete",onClick:f},"删除")]),e("div",w,[e("table",null,[e("thead",null,[e("tr",null,[e("th",B,[u(e("input",{type:"checkbox","onUpdate:modelValue":t[0]||(t[0]=l=>o.value=l),onChange:m},null,544),[[p,o.value]])]),t[1]||(t[1]=e("th",{class:"col-title"},"标题",-1)),t[2]||(t[2]=e("th",{class:"col-from"},"来自",-1)),t[3]||(t[3]=e("th",{class:"col-time"},"时间",-1))])]),e("tbody",null,[(n(!0),d(x,null,k(a.value,l=>(n(),d("tr",{key:l.id},[e("td",D,[u(e("input",{type:"checkbox","onUpdate:modelValue":_=>l.selected=_},null,8,F),[[p,l.selected]])]),e("td",S,r(l.title),1),e("td",j,r(l.from),1),e("td",A,r(l.time),1)]))),128)),a.value.length===0&&!i.value?(n(),d("tr",E,[...t[4]||(t[4]=[e("td",{colspan:"4",class:"empty-cell"},"无数据",-1)])])):y("",!0)])])])])]),_:1}))}}),H=U(L,[["__scopeId","data-v-42614ad3"]]);export{H as default};
