import{M as w,e as C}from"./MainLayout-B5rIQJ09.js";import{d as T,C as $,o as B,q as M,w as A,a as s,n as r,c as o,F as m,r as E,i as f,b as d,f as i,t as u,k as y,_ as L}from"./index-BHIK7C10.js";const S={class:"activity-container"},V={class:"activity-tabs"},N={class:"activity-list"},F={key:0,class:"loading-state"},H={class:"activity-image"},I=["src","alt"],q={class:"activity-content"},z={class:"activity-title"},D={class:"activity-time"},j={class:"activity-intro"},G=["innerHTML"],J=["onClick"],K={key:0},O={key:1},P={class:"activity-stamp"},Q={key:0,class:"empty-state"},R=T({__name:"Activity",setup(U){const n=d("ongoing"),l=d([]),v=d(!1),c=d(new Set),k=a=>{switch(a){case"ongoing":return"0";case"ended":return"1";case"preview":return"-1";default:return"0"}},p=async()=>{v.value=!0;try{const a=k(n.value),t=await C(a);t.code===200&&t.data?l.value=t.data:l.value=[]}catch(a){console.error("获取活动列表失败:",a),l.value=[]}finally{v.value=!1}},b=a=>{const t=a.start_at||"",e=a.end_at||"长期";return t&&e?`${t.split(" ")[0]}至${e==="长期"?e:e.split(" ")[0]}`:"长期有效"},h=()=>{switch(n.value){case"ongoing":return"进行中";case"ended":return"已结束";case"preview":return"未开始";default:return"进行中"}},x=a=>{c.value.has(a)?c.value.delete(a):c.value.add(a)},_=a=>c.value.has(a);return $(n,()=>{p()}),B(()=>{p()}),(a,t)=>(i(),M(w,null,{default:A(()=>[s("div",S,[s("div",V,[s("span",{class:r(["tab-item",{active:n.value==="ongoing"}]),onClick:t[0]||(t[0]=e=>n.value="ongoing")},"进行中的活动",2),s("span",{class:r(["tab-item",{active:n.value==="ended"}]),onClick:t[1]||(t[1]=e=>n.value="ended")},"已结束的活动",2),s("span",{class:r(["tab-item",{active:n.value==="preview"}]),onClick:t[2]||(t[2]=e=>n.value="preview")},"活动预告",2)]),s("div",N,[v.value?(i(),o("div",F,[...t[3]||(t[3]=[s("p",null,"加载中...",-1)])])):(i(),o(m,{key:1},[(i(!0),o(m,null,E(l.value,e=>{var g;return i(),o("div",{key:e.id,class:"activity-item"},[s("div",H,[s("img",{src:e.pc_pic||e.pic,alt:e.title},null,8,I)]),s("div",q,[s("h3",z,u(e.title),1),s("p",D,[t[4]||(t[4]=s("span",{class:"label"},"活动时间：",-1)),y(u(b(e)),1)]),s("p",j,[t[5]||(t[5]=s("span",{class:"label"},"活动简介：",-1)),y(u((g=e.content)==null?void 0:g.replace(/<[^>]+>/g,"").substring(0,100))+"...",1)]),_(e.id)?(i(),o("div",{key:0,class:"activity-detail",innerHTML:e.content},null,8,G)):f("",!0),s("button",{type:"button",class:"expand-btn",onClick:W=>x(e.id)},[_(e.id)?(i(),o("span",O,"❮ 收起")):(i(),o("span",K,"❯ 展开更多"))],8,J)]),s("div",P,[s("div",{class:r(["stamp",n.value])},u(h()),3)])])}),128)),l.value.length===0?(i(),o("div",Q,[...t[6]||(t[6]=[s("p",null,"暂无活动",-1)])])):f("",!0)],64))])])]),_:1}))}}),Z=L(R,[["__scopeId","data-v-b76095e9"]]);export{Z as default};
