import{a as O,i as M,w as P,t as W,c as q,b as B,d as S}from"./DataTable-BaHV4eO8.js";import{h as C,K as f,M as m,o as I,N,B as j,O as F}from"./index-BIIhTWEd.js";const K=M?window:void 0,E=M?window.navigator:void 0;function V(e){var n;const s=f(e);return(n=s==null?void 0:s.$el)!=null?n:s}function L(...e){const n=[],s=()=>{n.forEach(t=>t()),n.length=0},p=(t,o,a,l)=>(t.addEventListener(o,a,l),()=>t.removeEventListener(o,a,l)),c=C(()=>{const t=S(f(e[0])).filter(o=>o!=null);return t.every(o=>typeof o!="string")?t:void 0}),r=P(()=>{var t,o;return[(o=(t=c.value)==null?void 0:t.map(a=>V(a)))!=null?o:[K].filter(a=>a!=null),S(f(c.value?e[1]:e[0])),S(j(c.value?e[2]:e[1])),f(c.value?e[3]:e[2])]},([t,o,a,l])=>{if(s(),!(t!=null&&t.length)||!(o!=null&&o.length)||!(a!=null&&a.length))return;const d=B(l)?{...l}:l;n.push(...t.flatMap(y=>o.flatMap(g=>a.map(h=>p(y,g,h,d)))))},{flush:"post"}),v=()=>{r(),s()};return W(s),v}function $(){const e=m(!1),n=N();return n&&I(()=>{e.value=!0},n),e}function T(e){const n=$();return C(()=>(n.value,!!e()))}function x(e,n={}){const{controls:s=!1,navigator:p=E}=n,c=T(()=>p&&"permissions"in p),r=m(),v=typeof e=="string"?{name:e}:e,t=m(),o=()=>{var l,d;t.value=(d=(l=r.value)==null?void 0:l.state)!=null?d:"prompt"};L(r,"change",o,{passive:!0});const a=q(async()=>{if(c.value){if(!r.value)try{r.value=await p.permissions.query(v)}catch{r.value=void 0}finally{o()}if(s)return F(r.value)}});return a(),s?{state:t,isSupported:c,query:a}:t}function D(e={}){const{navigator:n=E,read:s=!1,source:p,copiedDuring:c=1500,legacy:r=!1}=e,v=T(()=>n&&"clipboard"in n),t=x("clipboard-read"),o=x("clipboard-write"),a=C(()=>v.value||r),l=m(""),d=m(!1),y=O(()=>d.value=!1,c,{immediate:!1});async function g(){let u=!(v.value&&w(t.value));if(!u)try{l.value=await n.clipboard.readText()}catch{u=!0}u&&(l.value=A())}a.value&&s&&L(["copy","cut"],g,{passive:!0});async function h(u=f(p)){if(a.value&&u!=null){let i=!(v.value&&w(o.value));if(!i)try{await n.clipboard.writeText(u)}catch{i=!0}i&&R(u),l.value=u,d.value=!0,y.start()}}function R(u){const i=document.createElement("textarea");i.value=u??"",i.style.position="absolute",i.style.opacity="0",document.body.appendChild(i),i.select(),document.execCommand("copy"),i.remove()}function A(){var u,i,b;return(b=(i=(u=document==null?void 0:document.getSelection)==null?void 0:u.call(document))==null?void 0:i.toString())!=null?b:""}function w(u){return u==="granted"||u==="prompt"}return{isSupported:a,text:l,copied:d,copy:h}}export{D as u};
