import{d as M,o as N,D as P,x as U,w as z,e as t,i as o,t as l,c as r,r as S,F as h,j as k,k as d,m as Q,p as i,q as V,n as x,s as D}from"./index-hWKOlkWM.js";import{U as E}from"./UserLayout-CFmo2CmG.js";import{u as H}from"./MainLayout-DtU7OwZM.js";import{c as W,v as Y,s as G,e as J}from"./customer-DIYUO1RJ.js";const K={class:"common userdata otherinfo-box"},O={class:"otherinfo"},X={class:"coin"},Z={class:"signwrap"},F={class:"num"},ss={class:"logs"},ts={class:"layui-card common inpourfanliwrap"},es={class:"layui-card-header"},ns={class:"floatright"},os={class:"coin"},ls={class:"layui-card-body"},as={class:"tasklist"},is={class:"black"},rs={width:"160"},ds={class:"progress-bar"},us={width:"120",align:"right"},ps={class:"coin"},cs={class:"layui-card common daylosefanliwrap"},vs={class:"layui-card-header"},gs={class:"floatright"},ms={class:"coin"},ys={class:"layui-card-body"},fs={class:"tasklist"},_s={class:"black"},Ss={width:"120",align:"right"},hs={class:"coin"},ks={class:"layui-card common beginner-tasks"},ws={class:"layui-card-body"},bs={class:"tasklist"},Cs={width:"70"},Ls=["onClick"],$s={key:1},Rs=M({__name:"Index",setup(xs){const T=Q(),j=H(),w=k(()=>j.isLogin),p=d(null),q=d(null),b=d(null),C=d(null),L=d(!1),u=k(()=>{var n,s,e,a,g,y,f,_;return{todayRank:"500以外",memberCard:((s=(n=p.value)==null?void 0:n.customer)==null?void 0:s.vip_label)||"普通会员",weekSalary:((e=b.value)==null?void 0:e.coin)||0,signedCount:((a=C.value)==null?void 0:a.total_people)||0,lastLoginAddress:((y=(g=p.value)==null?void 0:g.customer)==null?void 0:y.last_login_address)||"-",lastLoginTime:I((_=(f=p.value)==null?void 0:f.customer)==null?void 0:_.last_login_time)}}),m=d({todayDeposit:0,effectiveFlow:0,levels:[{multiple:8,percent:3,remaining:0},{multiple:15,percent:6,remaining:0},{multiple:23,percent:10,remaining:0}]}),$=d({yesterdayLoss:0,levels:[{multiple:4,percent:2,remaining:0},{multiple:8,percent:3,remaining:0},{multiple:15,percent:4,remaining:0},{multiple:20,percent:5,remaining:0}]}),B=k(()=>{const n=p.value,s=n==null?void 0:n.member_field,e=n==null?void 0:n.customer;return[{name:"绑定邮箱",desc:"邮箱用于找回密码、领取救济金等，应尽快设置",completed:!!(e!=null&&e.email),action:e!=null&&e.email?"已绑定":"马上绑定",path:"/user/profile"},{name:"密码保护",desc:"用于验证你的身份，保护账户安全",completed:!!(e!=null&&e.securitypass),action:e!=null&&e.securitypass?"已设置":"马上设置",path:"/user/security"},{name:"手机认证",desc:"用于验证你的身份，保护账户安全",completed:!!(e!=null&&e.mobile),action:e!=null&&e.mobile?"已认证":"马上认证",path:"/user/verify"},{name:"完善支付宝账号",desc:"更好的核实身份，保护账户安全",completed:!!(s!=null&&s.alipay),action:s!=null&&s.alipay?"已设置":"马上设置",path:"/user/profile"},{name:"完善QQ号",desc:"更好的核实身份，保护账户安全",completed:!!(s!=null&&s.qq),action:s!=null&&s.qq?"已设置":"马上设置",path:"/user/profile"},{name:"二级密码",desc:"设置二级密码，为了保障您的资金安全，建议定期修改二级密码！",completed:!1,action:"设置",path:"/user/security"}]}),c=n=>(n==null?void 0:n.toLocaleString())||"0",I=n=>{if(!n)return"-";const s=new Date(n*1e3),e=s.getFullYear(),a=(s.getMonth()+1).toString().padStart(2,"0"),g=s.getDate().toString().padStart(2,"0"),y=s.getHours().toString().padStart(2,"0"),f=s.getMinutes().toString().padStart(2,"0"),_=s.getSeconds().toString().padStart(2,"0");return`${e}年${a}月${g}日 ${y}点${f}分${_}秒`},v=n=>{T.push(n)},A=(n,s)=>{if(s<=0)return 0;const e=n/s*100;return e>100?100:e},R=async()=>{if(w.value){L.value=!0;try{const[n,s,e,a]=await Promise.all([W(),Y(),G(),J()]);n.code===200&&n.data&&(p.value=n.data),s.code===200&&s.data&&(q.value=s.data),e.code===200&&e.data&&(b.value=e.data),a.code===200&&a.data&&(C.value=a.data)}catch(n){console.error("加载用户数据失败",n)}finally{L.value=!1}}};return N(()=>{R()}),P(w,n=>{n&&R()}),(n,s)=>(i(),U(E,null,{default:z(()=>[t("div",K,[t("ul",O,[t("li",null,[t("div",null,[s[4]||(s[4]=o("今日排名：",-1)),t("span",null,l(u.value.todayRank),1)])]),t("li",null,[t("div",null,[s[5]||(s[5]=o("会员卡：",-1)),t("span",null,l(u.value.memberCard),1)])]),t("li",null,[t("div",null,[s[6]||(s[6]=o("本周工资：",-1)),t("span",X,l(c(u.value.weekSalary)),1),t("a",{href:"javascript:void(0)",onClick:s[0]||(s[0]=e=>v("/user/salary"))},"查看明细"),t("a",{href:"javascript:void(0)",onClick:s[1]||(s[1]=e=>v("/user/salary"))},"领取工资")])]),t("li",null,[t("div",Z,[s[7]||(s[7]=o("今日已签到 ",-1)),t("span",F,l(u.value.signedCount),1),s[8]||(s[8]=o(" 人 ",-1)),t("a",{href:"javascript:void(0)",onClick:s[2]||(s[2]=e=>v("/user/checkin")),class:"signbtn"},"立即签到")])]),t("li",null,[t("div",ss,[t("span",null,"上次登录地："+l(u.value.lastLoginAddress),1),t("span",null,l(u.value.lastLoginTime),1)])])])]),t("div",ts,[t("div",es,[t("div",ns,[s[9]||(s[9]=o("今日首充 ",-1)),t("span",os,l(c(m.value.todayDeposit)),1),s[10]||(s[10]=o("    ",-1)),t("a",{href:"javascript:void(0)",onClick:s[3]||(s[3]=e=>v("/user/rebate")),class:"btn danger"},"查看返利")]),s[11]||(s[11]=o(" 每日首充返利 ",-1))]),t("div",ls,[t("table",as,[(i(!0),r(h,null,S(m.value.levels,(e,a)=>(i(),r("tr",{key:a},[t("th",is,[s[14]||(s[14]=o("有效流水达到今日首充的",-1)),t("strong",null,[t("span",null,l(e.multiple),1),s[12]||(s[12]=o("倍",-1))]),s[15]||(s[15]=o("，可领取首充的",-1)),t("strong",null,[t("span",null,l(e.percent),1),s[13]||(s[13]=o("%",-1))])]),t("td",rs,[t("div",ds,[t("div",{class:"progress-fill",style:V({width:A(m.value.effectiveFlow,m.value.todayDeposit*e.multiple)+"%"})},null,4)])]),t("td",us,[t("div",null,[s[16]||(s[16]=o("还差 ",-1)),t("span",ps,l(c(e.remaining)),1)])])]))),128))])])]),t("div",cs,[t("div",vs,[t("div",gs,[s[17]||(s[17]=o(" 昨日亏损 ",-1)),t("span",ms,l(c($.value.yesterdayLoss)),1)]),s[18]||(s[18]=o(" 每日亏损返利 ",-1))]),t("div",ys,[t("table",fs,[(i(!0),r(h,null,S($.value.levels,(e,a)=>(i(),r("tr",{key:a},[t("th",_s,[s[21]||(s[21]=o("有效流水达到今日亏损的",-1)),t("strong",null,[t("span",null,l(e.multiple),1),s[19]||(s[19]=o("倍",-1))]),s[22]||(s[22]=o("，可领取日亏损额的",-1)),t("strong",null,[t("span",null,l(e.percent),1),s[20]||(s[20]=o("%",-1))])]),s[24]||(s[24]=t("td",{width:"160"},[t("div",{class:"progress-bar"},[t("div",{class:"progress-fill",style:{width:"0%"}})])],-1)),t("td",Ss,[t("div",null,[s[23]||(s[23]=o("还差 ",-1)),t("span",hs,l(c(e.remaining)),1)])])]))),128))])])]),t("div",ks,[s[25]||(s[25]=t("div",{class:"layui-card-header"},"新手任务",-1)),t("div",ws,[t("table",bs,[(i(!0),r(h,null,S(B.value,(e,a)=>(i(),r("tr",{key:a},[t("th",{class:x({pass:e.completed})},[t("span",{class:x(e.completed?"icon-pass":"icon-wrong")},l(e.completed?"✓":"✗"),3),o(" "+l(e.name),1)],2),t("td",null,l(e.desc),1),t("td",Cs,[e.completed?(i(),r("span",$s,l(e.action),1)):(i(),r("a",{key:0,href:"javascript:void(0)",onClick:g=>v(e.path)},l(e.action),9,Ls))])]))),128))])])])]),_:1}))}}),Is=D(Rs,[["__scopeId","data-v-10579831"]]);export{Is as default};
