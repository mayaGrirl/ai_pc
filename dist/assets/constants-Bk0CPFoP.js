import{d as q,u as K,D as f,a as g,c as a,F as _,e as m,n as x,t as b,k as r,p as i,B as w}from"./index-e_J8t8Nx.js";import{h as k}from"./customer-CEo_dkBH.js";import{h as l}from"./MainLayout-DhlqgofP.js";const S=["value"],T=["disabled"],B={key:0},I={key:1},V={key:2},D=60,F=q({__name:"receive-sms",props:{scene:{},modelValue:{},disabled:{type:Boolean}},emits:["update:modelValue"],setup(o,{emit:p}){const u=w(),d=o,v=p,{t:E}=K(),n=r(0),t=r(!1);let c=null;f(n,e=>{e<=0||(c=window.setTimeout(()=>{n.value--},1e3))}),g(()=>{c&&clearTimeout(c)});const y=async()=>{if(!(t.value||n.value>0)){t.value=!0;try{const{code:e,message:s}=await k(d.scene);e!==200?u.error(s):(u.success("发送成功"),n.value=D)}catch(e){const s=(e==null?void 0:e.message)||"发送失败，请稍后再试";u.error(s)}finally{t.value=!1}}},h=e=>{const s=e.target.value;v("update:modelValue",s)};return(e,s)=>(i(),a(_,null,[m("input",{id:"verify_code",value:o.modelValue,onInput:h,type:"text",inputmode:"numeric",pattern:"[0-9]*",autocomplete:"one-time-code",placeholder:"请输入验证码",class:"px-4 py-[14px] border-2 border-gray-200 rounded-lg text-[15px] transition-all duration-300 outline-none focus:border-[#667eea] focus:shadow-[0_0_0_3px_rgba(102,126,234,0.1)] flex-1 min-w-0 text-gray-600 placeholder-gray-400 focus:outline-none"},null,40,S),m("button",{type:"button",disabled:o.disabled||t.value||n.value>0,onClick:y,class:x(["shrink-0 h-8 px-3 rounded text-xs whitespace-nowrap transition",o.disabled||t.value||n.value>0?"bg-gray-600 text-white cursor-not-allowed":"bg-blue-600 text-white active:scale-95 cursor-pointer"])},[t.value?(i(),a("span",B,"发送中...")):n.value>0?(i(),a("span",I,b(n.value)+"s ",1)):(i(),a("span",V,"发送验证码"))],10,T)],64))}}),R=o=>l.post("/api/app/v1/card/records",o),U=()=>l.get("/api/app/v1/card/detail",{}),A=o=>l.post("/api/app/v1/card/exchange",o),z=[{value:1,i18nKey:"common.question-options.1"},{value:2,i18nKey:"common.question-options.2"},{value:3,i18nKey:"common.question-options.3"},{value:4,i18nKey:"common.question-options.4"},{value:5,i18nKey:"common.question-options.5"},{value:6,i18nKey:"common.question-options.6"},{value:7,i18nKey:"common.question-options.7"},{value:8,i18nKey:"common.question-options.8"},{value:9,i18nKey:"common.question-options.9"},{value:10,i18nKey:"common.question-options.10"},{value:11,i18nKey:"common.question-options.11"},{value:12,i18nKey:"common.question-options.12"},{value:13,i18nKey:"common.question-options.13"},{value:14,i18nKey:"common.question-options.14"},{value:15,i18nKey:"common.question-options.15"},{value:16,i18nKey:"common.question-options.16"},{value:17,i18nKey:"common.question-options.17"},{value:18,i18nKey:"common.question-options.18"},{value:19,i18nKey:"common.question-options.19"}];export{z as S,F as _,U as a,R as b,A as c};
