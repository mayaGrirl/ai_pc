import{d as z,o as F,g as K,q as h,w as C,a as t,j as a,h as l,s as v,y as S,t as M,E as V,G as j,c as b,F as G,r as H,n as A,i as O,k as U,m as Z,b as u,I as J,e as w,l as Q,A as W,B as X,f as d}from"./index-BHIK7C10.js";import{c as Y,u as ee,S as te,M as se,s as oe,p as re}from"./MainLayout-B5rIQJ09.js";import{h as ae}from"./common-YT7QVq-F.js";import{S as ne,L as E,E as I,a as L,b as P}from"./sodium-Bc0TsoPz.js";import{A as le}from"./arrow-left-B53qT5JO.js";import{A as ie,M as de}from"./message-square-BG3iNLiZ.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=Y("UserPlusIcon",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),ue={class:"min-h-[calc(100vh-160px)] bg-gray-50/50 flex items-center justify-center p-6 relative overflow-hidden"},pe={class:"w-full max-w-[520px] bg-white rounded-[40px] shadow-2xl shadow-gray-200/50 border border-white/50 p-5 relative z-10 animate-in fade-in zoom-in duration-500"},fe={class:"text-center mb-4"},ge={class:"inline-flex items-center justify-center w-20 h-20 bg-gradient-to-br from-red-50 to-orange-50 rounded-[32px] mb-3 shadow-sm"},ye={class:"space-y-5"},me={class:"space-y-2"},xe={class:"relative group"},ve={class:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none"},be={class:"space-y-2"},we={class:"flex gap-3"},he={class:"relative flex-1 group"},_e={class:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none"},ke=["disabled"],Ce={class:"space-y-2"},Se={class:"relative group"},Me={class:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none"},Ve=["type"],je={key:0,class:"px-1 pt-1 flex items-center justify-between"},Ae={class:"flex gap-1 flex-1 max-w-[160px]"},Ue={class:"space-y-2"},Ee={class:"relative group"},Ie={class:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none"},Le=["type"],Pe=["disabled"],Re={key:0,class:"w-6 h-6 border-3 border-white/30 border-t-white rounded-full animate-spin"},Te={key:1,class:"flex items-center gap-2 text-lg"},Be={class:"text-center"},$e={class:"mt-5 border-t border-gray-50 flex items-center justify-center gap-2 text-sm text-gray-400 italic"},He=z({__name:"Register",setup(qe){const _=Z(),R=W(),k=ee(),n=X(),p=u(!1),f=u(!1),g=u(!1),c=u(0),y=u("");let m=null;const T=w(()=>R.query.t||""),s=J({mobile:"",verify_code:"",password:"",confirm_password:""});F(async()=>{try{const o=await ae();o.code===200&&o.data&&(y.value=o.data.key)}catch(o){console.error("Failed to get public key:",o)}}),K(()=>{m&&clearInterval(m)});const B=()=>{c.value=60,m=setInterval(()=>{c.value--,c.value<=0&&clearInterval(m)},1e3)},x=w(()=>{const o=s.password;if(!o)return 0;let e=0;return o.length>=6&&e++,o.length>=8&&e++,/[A-Z]/.test(o)&&e++,/[0-9]/.test(o)&&e++,Math.min(e,4)}),$=w(()=>["太简单","弱","中","强","极强"][x.value]),q=w(()=>["bg-gray-100","bg-red-400","bg-orange-400","bg-yellow-400","bg-green-500"][x.value]),D=async()=>{if(!s.mobile||!/^1[3-9]\d{9}$/.test(s.mobile)){n.error("请输入正确的11位手机号");return}try{const o=await oe(s.mobile);o.code===200?(n.success("验证码已发送"),B()):n.error(o.message||"获取验证码失败")}catch(o){n.error(o.message||"获取验证码失败")}},N=async()=>{if(!s.mobile||s.mobile.length!==11){n.error("请输入正确的手机号");return}if(!s.verify_code){n.error("请输入短信验证码");return}if(!s.password||s.password.length<8){n.error("密码长度至少为8位");return}if(s.password!==s.confirm_password){n.error("两次输入的密码不一致");return}p.value=!0;try{let o=s.password,e=s.confirm_password;y.value&&(o=await P.encrypt(s.password,y.value),e=await P.encrypt(s.confirm_password,y.value));const i=await re({mobile:s.mobile,verify_code:s.verify_code,password:o,confirm_password:e,recommend:T.value||void 0});i.code===200&&i.data?(k.setToken(i.data.access_token,i.data.token_type,i.data.expires_at),await k.fetchCurrentCustomer(),n.success("注册成功"),await _.push("/")):n.error(i.message||"注册失败")}catch(o){n.error(o.message||"注册过程中发生错误")}finally{p.value=!1}};return(o,e)=>{const i=Q("router-link");return d(),h(se,null,{default:C(()=>[t("div",ue,[t("div",pe,[t("button",{onClick:e[0]||(e[0]=r=>a(_).push("/login")),class:"absolute top-8 left-8 p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-50 rounded-full transition-all group"},[l(a(le),{class:"w-5 h-5 group-hover:-translate-x-0.5 transition-transform"})]),t("div",fe,[t("div",ge,[l(a(ce),{class:"w-10 h-10 text-[#ff4757]"})]),e[7]||(e[7]=t("h1",{class:"text-3xl font-black text-gray-900 tracking-tight mb-3"},"创建新账号",-1)),e[8]||(e[8]=t("p",{class:"text-gray-500 font-medium"},"加入 鼎丰28，享受安全可信赖的游戏体验",-1))]),t("div",ye,[t("div",me,[e[9]||(e[9]=t("label",{class:"text-[12px] font-bold text-gray-400 uppercase tracking-wider ml-1"},"手机号码",-1)),t("div",xe,[t("div",ve,[l(a(te),{class:"w-5 h-5 text-gray-300 group-focus-within:text-[#ff4757] transition-colors"})]),v(t("input",{"onUpdate:modelValue":e[1]||(e[1]=r=>s.mobile=r),type:"text",maxlength:"11",placeholder:"请输入您的11位手机号",class:"w-full pl-12 pr-4 py-4 bg-gray-50 border-transparent focus:bg-white focus:border-[#ff4757] focus:ring-4 focus:ring-red-50 rounded-2xl text-gray-700 font-medium transition-all outline-none border-2"},null,512),[[S,s.mobile]])])]),t("div",be,[e[10]||(e[10]=t("label",{class:"text-[12px] font-bold text-gray-400 uppercase tracking-wider ml-1"},"短信验证码",-1)),t("div",we,[t("div",he,[t("div",_e,[l(a(ne),{class:"w-5 h-5 text-gray-300 group-focus-within:text-[#ff4757] transition-colors"})]),v(t("input",{"onUpdate:modelValue":e[2]||(e[2]=r=>s.verify_code=r),type:"text",maxlength:"6",placeholder:"6位验证码",class:"w-full pl-12 pr-4 py-4 bg-gray-50 border-transparent focus:bg-white focus:border-[#ff4757] focus:ring-4 focus:ring-red-50 rounded-2xl text-gray-700 font-medium transition-all outline-none border-2"},null,512),[[S,s.verify_code]])]),t("button",{onClick:D,disabled:c.value>0,class:"px-6 py-4 bg-gray-100 text-gray-600 font-bold rounded-2xl hover:bg-gray-200 transition-colors disabled:opacity-50 disabled:cursor-not-allowed whitespace-nowrap min-w-[120px]"},M(c.value>0?`${c.value}s`:"获取验证码"),9,ke)])]),t("div",Ce,[e[11]||(e[11]=t("label",{class:"text-[12px] font-bold text-gray-400 uppercase tracking-wider ml-1"},"设置登录密码",-1)),t("div",Se,[t("div",Me,[l(a(E),{class:"w-5 h-5 text-gray-300 group-focus-within:text-[#ff4757] transition-colors"})]),v(t("input",{"onUpdate:modelValue":e[3]||(e[3]=r=>s.password=r),type:f.value?"text":"password",placeholder:"密码不少于6位",class:"w-full pl-12 pr-12 py-4 bg-gray-50 border-transparent focus:bg-white focus:border-[#ff4757] focus:ring-4 focus:ring-red-50 rounded-2xl text-gray-700 font-medium transition-all outline-none border-2"},null,8,Ve),[[V,s.password]]),t("button",{type:"button",onClick:e[4]||(e[4]=r=>f.value=!f.value),class:"absolute inset-y-0 right-0 pr-4 flex items-center text-gray-400 hover:text-gray-600 transition-colors"},[(d(),h(j(f.value?a(I):a(L)),{class:"w-5 h-5"}))])]),s.password?(d(),b("div",je,[t("div",Ae,[(d(),b(G,null,H(4,r=>t("div",{key:r,class:A(["h-1.5 flex-1 rounded-full transition-all duration-500",r<=x.value?q.value:"bg-gray-100"])},null,2)),64))]),t("span",{class:A(["text-[11px] font-bold",x.value>0?"text-gray-500":"text-gray-300"])}," 强度: "+M($.value),3)])):O("",!0)]),t("div",Ue,[e[12]||(e[12]=t("label",{class:"text-[12px] font-bold text-gray-400 uppercase tracking-wider ml-1"},"确认新密码",-1)),t("div",Ee,[t("div",Ie,[l(a(E),{class:"w-5 h-5 text-gray-300 group-focus-within:text-[#ff4757] transition-colors"})]),v(t("input",{"onUpdate:modelValue":e[5]||(e[5]=r=>s.confirm_password=r),type:g.value?"text":"password",placeholder:"请再次填写您的密码",class:"w-full pl-12 pr-12 py-4 bg-gray-50 border-transparent focus:bg-white focus:border-[#ff4757] focus:ring-4 focus:ring-red-50 rounded-2xl text-gray-700 font-medium transition-all outline-none border-2"},null,8,Le),[[V,s.confirm_password]]),t("button",{type:"button",onClick:e[6]||(e[6]=r=>g.value=!g.value),class:"absolute inset-y-0 right-0 pr-4 flex items-center text-gray-400 hover:text-gray-600 transition-colors"},[(d(),h(j(g.value?a(I):a(L)),{class:"w-5 h-5"}))])])]),t("button",{onClick:N,disabled:p.value,class:"w-full py-3 mt-4 bg-gradient-to-r from-[#ff4757] to-[#ee5a6f] text-white font-black rounded-3xl shadow-xl shadow-red-100 hover:shadow-red-200 hover:-translate-y-1 active:translate-y-0 transition-all flex items-center justify-center gap-2 disabled:opacity-70 disabled:hover:translate-y-0"},[p.value?(d(),b("span",Re)):(d(),b("span",Te,[e[13]||(e[13]=U("立即创建账户 ",-1)),l(a(ie),{class:"w-5 h-5"})]))],8,Pe),t("div",Be,[e[15]||(e[15]=t("span",{class:"text-gray-400 font-medium"},"已有账户?",-1)),l(i,{to:"/login",class:"ml-2 text-[#ff4757] font-black hover:underline underline-offset-4"},{default:C(()=>[...e[14]||(e[14]=[U(" 直接登录 ",-1)])]),_:1})])]),t("div",$e,[l(a(de),{class:"w-4 h-4"}),e[16]||(e[16]=t("span",null,"遇到问题? 请联系您的代理提供支持",-1))])])])]),_:1})}}});export{He as default};
