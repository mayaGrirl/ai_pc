import{U as h}from"./UserLayout-D6aZwznH.js";import{n as y,o as g}from"./customer-D8M0O_Uq.js";import{d as b,o as k,x as w,w as j,e,c as i,r as _,F as p,t as c,k as r,p as l,s as x}from"./index-CvlciKPO.js";import"./MainLayout-feKKu_NU.js";const C={class:"welfare-page"},B={class:"welfare-modal"},R={class:"modal-header"},D={class:"header-icons"},L={class:"icon-amount"},F={class:"modal-body"},S={key:0,class:"loading-state"},U={key:1,class:"rule-list"},W={class:"col-level"},$=["src"],E={class:"col-amount coin"},I={class:"col-rule"},M={class:"verify-section"},N=["disabled"],V=b({__name:"Welfare",setup(q){const d=r([]),u=r(!0),o=r(0),v=r(10),n=r(!1),m=async()=>{u.value=!0;try{const a=await y();if(a.code===200&&a.data){d.value=a.data.options||[],v.value=a.data.limit||10;let s=0;a.data.limit>a.data.receive_count&&(s=a.data.limit-a.data.receive_count),o.value=s}}catch(a){console.error("åŠ è½½æ•‘æµæ•°æ®å¤±è´¥",a)}finally{u.value=!1}},f=async()=>{if(o.value<1){alert("ä»Šæ—¥é¢†å–æ¬¡æ•°å·²ç”¨å®Œ");return}if(!n.value){n.value=!0;try{const a=await g();a.code===200?(alert(a.message||"é¢†å–æˆåŠŸ"),o.value=o.value-1):alert(a.message||"é¢†å–å¤±è´¥")}catch{alert("é¢†å–å¤±è´¥")}finally{n.value=!1}}};return k(()=>{m()}),(a,s)=>(l(),w(h,null,{default:j(()=>[e("div",C,[s[2]||(s[2]=e("div",{class:"page-tabs"},[e("span",{class:"tab active"},"é¢†æ•‘æµ")],-1)),e("div",B,[e("div",R,[e("div",D,[(l(!0),i(p,null,_(d.value,t=>(l(),i("span",{key:t.level,class:"amount-icon"},[s[0]||(s[0]=e("span",{class:"icon-bag"},"ğŸ",-1)),e("span",L,c(t.day_jiuji_point),1)]))),128))])]),e("div",F,[u.value?(l(),i("div",S,"åŠ è½½ä¸­...")):(l(),i("div",U,[s[1]||(s[1]=e("div",{class:"rule-header"},[e("span",{class:"col-level"},"ç­‰çº§"),e("span",{class:"col-amount"},"æ•‘æµé‡‘"),e("span",{class:"col-rule"},"é¢†å–æ¡ä»¶")],-1)),(l(!0),i(p,null,_(d.value,t=>(l(),i("div",{key:t.level,class:"rule-item"},[e("span",W,[e("img",{src:`/skin/pc/wm/images/level/${t.level}.png`,width:"20"},null,8,$)]),e("span",E,c(t.day_jiuji_point),1),e("span",I,"é‡‘è±†â‰¤"+c(t.day_jiuji_point)+"æ—¶å¯é¢†å–ï¼Œæ¯æ—¥"+c(v.value)+"æ¬¡",1)]))),128))])),e("div",M,[e("button",{class:"btn-claim",onClick:f,disabled:n.value||o.value<1},c(n.value?"é¢†å–ä¸­...":`ç«‹å³é¢†å–ï¼ˆå‰©ä½™${o.value}æ¬¡ï¼‰`),9,N)])])])])]),_:1}))}}),J=x(V,[["__scopeId","data-v-05b2e9dd"]]);export{J as default};
