import{d as _,o as h,x as b,w as g,e,h as u,G as p,c,r as k,F as y,f as x,k as d,p as n,t as r,s as C}from"./index-D98inPcp.js";import{U as M}from"./UserLayout-CkL6LAQG.js";import{j as U}from"./MainLayout-SVTJ2ZJo.js";const V={class:"messages-page"},w={class:"message-table"},B={class:"col-checkbox"},F={class:"col-checkbox"},S=["onUpdate:modelValue"],A={class:"col-title"},D={class:"col-from"},E={class:"col-time"},L={key:0},N=_({__name:"Messages",setup(j){const a=d([]),i=d(!0),o=d(!1);h(async()=>{try{const s=await U({pagination:{page:1,size:20}});s.code===200&&s.data&&(a.value=s.data.map(t=>({id:t.id,title:t.title,from:t.from||"系统",time:t.created_at||t.time,selected:!1})))}catch(s){console.error("Failed to load messages:",s)}finally{i.value=!1}});const m=()=>{a.value.forEach(s=>{s.selected=o.value})},f=()=>{a.value=a.value.filter(s=>!s.selected),o.value=!1};return(s,t)=>(n(),b(M,null,{default:g(()=>[e("div",V,[t[5]||(t[5]=e("div",{class:"page-tabs"},[e("span",{class:"tab active"},"消息中心")],-1)),e("div",{class:"action-bar"},[e("button",{class:"btn-delete",onClick:f},"删除")]),e("div",w,[e("table",null,[e("thead",null,[e("tr",null,[e("th",B,[u(e("input",{type:"checkbox","onUpdate:modelValue":t[0]||(t[0]=l=>o.value=l),onChange:m},null,544),[[p,o.value]])]),t[1]||(t[1]=e("th",{class:"col-title"},"标题",-1)),t[2]||(t[2]=e("th",{class:"col-from"},"来自",-1)),t[3]||(t[3]=e("th",{class:"col-time"},"时间",-1))])]),e("tbody",null,[(n(!0),c(y,null,k(a.value,l=>(n(),c("tr",{key:l.id},[e("td",F,[u(e("input",{type:"checkbox","onUpdate:modelValue":v=>l.selected=v},null,8,S),[[p,l.selected]])]),e("td",A,r(l.title),1),e("td",D,r(l.from),1),e("td",E,r(l.time),1)]))),128)),a.value.length===0&&!i.value?(n(),c("tr",L,[...t[4]||(t[4]=[e("td",{colspan:"4",class:"empty-cell"},"无数据",-1)])])):x("",!0)])])])])]),_:1}))}}),q=C(N,[["__scopeId","data-v-42614ad3"]]);export{q as default};
