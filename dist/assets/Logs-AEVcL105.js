import{U as f}from"./UserLayout-CFmo2CmG.js";import{C}from"./customer-DIYUO1RJ.js";import{d as T,o as E,x as k,w as O,e as t,c,r as v,F as m,f as _,t as n,k as g,p as s,n as y,s as I}from"./index-hWKOlkWM.js";import"./MainLayout-DtU7OwZM.js";const A={class:"logs-page"},R={class:"logs-table"},F={class:"time-col"},x={class:"login-time"},z={key:0},N={key:0,class:"pagination"},V=["disabled"],L=["disabled"],M=["onClick"],S={class:"page-info"},G={class:"page-info"},P=T({__name:"Logs",setup(j){const l=g([]),d=g(!1),e=g({page:1,size:10,total:0}),p=[{id:1,time:"泰王海岸 阿比让 ORANGE-COTE-IVOIRE",location:"",ip:"102.209.218.71",loginTime:"26-01-20 15:53..."},{id:2,time:"泰王海岸 阿比让 ORANGE-COTE-IVOIRE",location:"",ip:"102.209.218.71",loginTime:"26-01-20 13:31..."},{id:3,time:"泰王海岸 阿比让 ORANGE-COTE-IVOIRE",location:"",ip:"102.209.218.71",loginTime:"26-01-20 12:59..."},{id:4,time:"泰王海岸 阿比让 ORANGE-COTE-IVOIRE",location:"",ip:"102.209.223.125",loginTime:"26-01-15 16:33..."},{id:5,time:"科特迪瓦 阿比让 Ftth Services",location:"",ip:"102.207.15.50",loginTime:"26-01-15 15:16..."},{id:6,time:"Ivory Coast Abidjan Autonomous District Abidjan Ftth Service",location:"",ip:"102.209.219.70",loginTime:"26-01-14 18:43..."},{id:7,time:"Ivory Coast Abidjan Autonomous District Abidjan Ftth Service",location:"",ip:"102.209.219.70",loginTime:"26-01-14 16:43..."},{id:8,time:"泰王海岸 阿比让 阿比让 ORANGE-COTE-IVOIRE",location:"",ip:"102.210.17.119",loginTime:"26-01-12 12:15..."},{id:9,time:"科特迪瓦 阿比让 Ftth Service",location:"",ip:"102.207.9.175",loginTime:"26-01-07 18:12..."},{id:10,time:"阿比让 阿比让 Ftth Service",location:"",ip:"102.207.9.106",loginTime:"26-01-06 18:06..."}],u=async()=>{d.value=!0;try{const o=await C({pagination:e.value});o.code===200&&o.data&&(l.value=o.data.map(a=>({id:a.id,time:a.location||a.area||"",location:a.region||"",ip:a.ip,loginTime:a.created_at||a.login_time})),e.value.total=(typeof o.total=="number"?o.total:0)||l.value.length),l.value.length===0&&(l.value=p,e.value.total=85)}catch(o){console.error("Failed to load login logs:",o),l.value=p,e.value.total=85}finally{d.value=!1}},r=o=>{e.value.page=o,u()},b=()=>{e.value.page>1&&(e.value.page--,u())},h=()=>{const o=Math.ceil(e.value.total/e.value.size);e.value.page<o&&(e.value.page++,u())};return E(()=>{u()}),(o,a)=>(s(),k(f,null,{default:O(()=>[t("div",A,[a[4]||(a[4]=t("div",{class:"page-tabs"},[t("span",{class:"tab active"},"登录日志")],-1)),t("div",R,[t("table",null,[a[3]||(a[3]=t("thead",null,[t("tr",null,[t("th",null,"时间"),t("th",null,"地区"),t("th",null,"IP"),t("th",null,"登录时间")])],-1)),t("tbody",null,[(s(!0),c(m,null,v(l.value,i=>(s(),c("tr",{key:i.id},[t("td",F,n(i.time),1),t("td",null,n(i.location),1),t("td",null,n(i.ip),1),t("td",x,n(i.loginTime),1)]))),128)),l.value.length===0&&!d.value?(s(),c("tr",z,[...a[2]||(a[2]=[t("td",{colspan:"4",class:"empty-cell"},"暂无登录日志",-1)])])):_("",!0)])])]),l.value.length>0?(s(),c("div",N,[t("button",{class:"btn-page",onClick:a[0]||(a[0]=i=>r(1)),disabled:e.value.page===1},"<<",8,V),t("button",{class:"btn-page",onClick:b,disabled:e.value.page===1},"<",8,L),(s(!0),c(m,null,v(Math.min(5,Math.ceil(e.value.total/e.value.size)),i=>(s(),c("span",{key:i,class:y(["page-num",{active:e.value.page===i}]),onClick:B=>r(i)},n(i),11,M))),128)),t("button",{class:"btn-page",onClick:h},">"),t("button",{class:"btn-page",onClick:a[1]||(a[1]=i=>r(Math.ceil(e.value.total/e.value.size)))},">>"),t("span",S,"共 "+n(Math.ceil(e.value.total/e.value.size))+" 页",1),t("span",G,n(e.value.size)+"条/页",1)])):_("",!0)])]),_:1}))}}),q=I(P,[["__scopeId","data-v-d66be9a5"]]);export{q as default};
