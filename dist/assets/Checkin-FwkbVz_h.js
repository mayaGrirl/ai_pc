import{U as S}from"./UserLayout-D9nXiU13.js";import{d as j,g as A}from"./customer-B-qyRnjg.js";import{d as B,o as I,r as p,y as q,w as R,f as s,k as i,t as n,h as y,c as m,g as h,F as w,p as c,n as U,s as Y}from"./index-BLIEWtAm.js";import"./MainLayout-VP33iVSz.js";const z={class:"checkin-page"},L={class:"checkin-stats"},N={class:"highlight"},T={class:"highlight"},V={class:"checkin-content"},E={class:"calendar-section"},O={class:"calendar-header"},G={class:"month-title"},H={class:"calendar-days"},J={class:"consecutive-info"},K={class:"days"},P={class:"days"},Q={class:"recent-section"},W={class:"recent-table"},X={class:"table-body"},Z={class:"user"},$={class:"reward"},ss={class:"amount"},as=B({__name:"Checkin",setup(ts){const o=p({todayCount:184,totalAmount:4118.85,consecutiveDays:22,currentReward:10}),d=p(new Date),r=y(()=>d.value.getFullYear()),u=y(()=>d.value.getMonth()+1),v=p([1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19]),g=new Date().getDate(),_=p([{user:"sg48182",reward:60,amount:20,time:"8分钟前"},{user:"sgdjhjdjhx",reward:140,amount:70,time:"7分钟前"},{user:"sg48805",reward:175,amount:20,time:"12分钟前"},{user:"sg45899",reward:10,amount:2,time:"12分钟前"},{user:"sg45640",reward:200,amount:10,time:"13分钟前"},{user:"syedjzei",reward:150,amount:5,time:"14分钟前"},{user:"sg45596",reward:700,amount:35,time:"14分钟前"},{user:"sq2888888",reward:400,amount:5,time:"16分钟前"},{user:"sq48783",reward:3,amount:2,time:"17分钟前"},{user:"sq48044",reward:420,amount:140,time:"18分钟前"}]),b=(t,a)=>new Date(t,a,0).getDate(),D=(t,a)=>new Date(t,a-1,1).getDay(),f=y(()=>{const t=[],a=D(r.value,u.value),e=b(r.value,u.value);for(let l=0;l<a;l++)t.push(null);for(let l=1;l<=e;l++)t.push(l);return t}),k=()=>{d.value=new Date(r.value,u.value-2,1)},C=()=>{d.value=new Date(r.value,u.value,1)},x=async()=>{try{const t=await A();t.code===200?(v.value.push(g),alert("签到成功！")):alert(t.message||"签到失败")}catch(t){console.error("Sign in error:",t),v.value.includes(g)||(v.value.push(g),alert("签到成功！"))}},M=t=>t?v.value.includes(t):!1,F=t=>{if(!t)return!1;const a=new Date;return t===a.getDate()&&u.value===a.getMonth()+1&&r.value===a.getFullYear()};return I(async()=>{try{const t=await j();t.code===200&&t.data&&(o.value={todayCount:t.data.total_people||o.value.todayCount,totalAmount:t.data.total_points||o.value.totalAmount,consecutiveDays:t.data.continue_days||o.value.consecutiveDays,currentReward:o.value.currentReward})}catch(t){console.error("Failed to load sign stats:",t)}}),(t,a)=>(c(),q(S,null,{default:R(()=>[s("div",z,[a[10]||(a[10]=s("div",{class:"page-tabs"},[s("span",{class:"tab active"},"签到")],-1)),s("div",L,[a[0]||(a[0]=i(" 今日签到 ",-1)),s("span",N,n(o.value.todayCount),1),a[1]||(a[1]=i(" 人， 累计送出 ",-1)),s("span",T,n(o.value.totalAmount),1),a[2]||(a[2]=i(" 元 ",-1)),a[3]||(a[3]=s("span",{class:"wait-text"},"等待返现",-1))]),s("div",V,[s("div",E,[s("div",O,[s("button",{class:"nav-btn",onClick:k},"<"),s("span",G,n(r.value)+"年 "+n(u.value)+"月",1),s("button",{class:"nav-btn",onClick:C},">")]),a[7]||(a[7]=s("div",{class:"calendar-weekdays"},[s("span",null,"日"),s("span",null,"一"),s("span",null,"二"),s("span",null,"三"),s("span",null,"四"),s("span",null,"五"),s("span",null,"六")],-1)),s("div",H,[(c(!0),m(w,null,h(f.value,(e,l)=>(c(),m("span",{key:l,class:U(["day",{empty:!e,signed:M(e),today:F(e)}])},n(e||""),3))),128))]),s("div",{class:"calendar-action"},[s("button",{class:"btn-signin",onClick:x},"立即签到")]),s("div",J,[a[4]||(a[4]=i(" 连续签到 ",-1)),s("span",K,n(o.value.consecutiveDays),1),a[5]||(a[5]=i(" 天，累计签到 ",-1)),s("span",P,n(o.value.consecutiveDays),1),a[6]||(a[6]=i(" 天 ",-1))])]),s("div",Q,[a[9]||(a[9]=s("div",{class:"recent-header"},"近期签到用户",-1)),s("div",W,[a[8]||(a[8]=s("div",{class:"table-header"},[s("span",null,"会员"),s("span",null,"签到积分"),s("span",null,"获得奖励")],-1)),s("div",X,[(c(!0),m(w,null,h(_.value,e=>(c(),m("div",{key:e.user,class:"table-row"},[s("span",Z,n(e.user),1),s("span",$,n(e.reward),1),s("span",ss,n(e.amount),1)]))),128))])])])]),a[11]||(a[11]=s("div",{class:"checkin-rules"},[s("div",{class:"rules-header"},"签到说明"),s("div",{class:"rules-content"},[s("p",null,"签到13周起，签到积累达7天及以上且昨夜投注10元以上即可每日8元，签到积累多每日8元。"),s("div",{class:"rules-progress"},[s("div",{class:"progress-item"},[s("span",{class:"icon"},"✓"),s("span",null,"签到1次获用赠额的 0.5 %,连续签到天数")]),s("div",{class:"progress-bar"},[s("span",{class:"bar active"}),s("span",{class:"bar active"}),s("span",{class:"bar"}),s("span",{class:"bar"}),s("span",{class:"bar"}),s("span",{class:"bar"}),s("span",{class:"bar"}),s("span",{class:"bar"}),s("span",{class:"bar"}),s("span",{class:"bar"})]),s("div",{class:"progress-label"},"10 *连续签到天数")])])],-1))])]),_:1}))}}),rs=Y(as,[["__scopeId","data-v-4a37ba22"]]);export{rs as default};
