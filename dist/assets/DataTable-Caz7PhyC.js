import{Q as _,K as j,J as T,R as D,S as C,D as F,k as b,d as A,c as p,e as c,F as w,r as k,b as O,C as B,t as S,p as m,q as I,n as P,T as M,i as V,s as N}from"./index-CvlciKPO.js";import{c as W}from"./createLucideIcon-Dd0dnaOK.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $=W("FolderOpenIcon",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);function H(e){return D()?(C(e),!0):!1}const R=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const q=Object.prototype.toString,ge=e=>q.call(e)==="[object Object]",z=()=>{};function G(e,a){function r(...n){return new Promise((u,l)=>{Promise.resolve(e(()=>a.apply(this,n),{fn:a,thisArg:this,args:n})).then(u).catch(l)})}return r}function L(e,a={}){let r,n,u=z;const l=o=>{clearTimeout(o),u(),u=z};let t;return o=>{const f=T(e),s=T(a.maxWait);return r&&l(r),f<=0||s!==void 0&&s<=0?(n&&(l(n),n=null),Promise.resolve(o())):new Promise((d,y)=>{u=a.rejectOnCancel?y:d,t=o,s&&!n&&(n=setTimeout(()=>{r&&l(r),n=null,d(t())},s)),r=setTimeout(()=>{n&&l(n),n=null,d(o())},f)})}}function pe(e){let a;function r(){return a||(a=e()),a}return r.reset=async()=>{const n=a;a=void 0,n&&await n},r}function me(e){return Array.isArray(e)?e:[e]}function Q(e,a=200,r={}){return G(L(a,r),e)}function ye(e,a,r={}){const{immediate:n=!0,immediateCallback:u=!1}=r,l=j(!1);let t=null;function i(){t&&(clearTimeout(t),t=null)}function o(){l.value=!1,i()}function f(...s){u&&e(),i(),l.value=!0,t=setTimeout(()=>{l.value=!1,t=null,e(...s)},T(a))}return n&&(l.value=!0,R&&f()),H(o),{isPending:_(l),start:f,stop:o}}function he(e,a,r){return F(e,a,{...r,immediate:!0})}function be(e,a={}){const{defaultSize:r=10,transform:n=g=>{var h;return{list:Array.isArray(g.data)?g.data:((h=g.data)==null?void 0:h.list)||g.list||[]}},initQuery:u={}}=a,l=b(!1),t=b([]),i=b(!1),o=b({page:1,size:r}),f=b({...u}),s=async(g=!1)=>{g&&(o.value.page=1),l.value=!0;try{const x={search:{...f.value},pagination:{page:o.value.page,size:o.value.size}},h=await e(x);if(h.code===200){const{list:v}=n(h);return a.appendMode&&o.value.page>1?t.value=[...t.value,...v]:t.value=v,v.length>=o.value.size?i.value=!0:i.value=!1,{hasMore:i,list:v}}else return o.value.page===1&&(t.value=[]),i.value=!1,{hasMore:!1,list:[]}}catch(x){console.error("Table load failed:",x),t.value=[],i.value=!1}finally{l.value=!1}},d=Q(()=>{s(!0)},300);return{loading:l,dataSource:t,hasMore:i,pagination:o,query:f,loadData:s,reload:d,changePage:g=>{o.value.page=g,s()},changeSize:g=>{o.value.size=g,s(!0)}}}const E={class:"data-table-container"},J={class:"overflow-x-auto rounded-xl border border-gray-200 bg-white shadow-sm"},K={class:"w-full border-collapse"},U={class:"bg-gray-50/50 border-b border-gray-100"},X={class:"divide-y divide-gray-100"},Y={key:0},Z=["colspan"],ee={key:1},te=["colspan"],ae={class:"flex flex-col items-center justify-center gap-3"},ne={class:"w-12 h-12 bg-gray-50 rounded-full flex items-center justify-center text-2xl text-gray-300"},se={class:"flex items-center justify-between mt-4 px-2"},re={class:"flex items-center gap-2"},oe=["disabled"],ie={class:"text-sm text-gray-600 px-2"},le=["disabled"],ce=A({__name:"DataTable",props:{columns:{default:()=>[]},data:{default:()=>[]},loading:{type:Boolean,default:!1},hasMore:{type:Boolean,default:!0},pagination:{},showPagination:{type:Boolean,default:!0}},emits:["change","update:size"],setup(e,{emit:a}){const r=e,n=a,u=t=>{t<1||n("change",t)},l=t=>{t<1||r.data.length<r.pagination.size||n("change",t)};return(t,i)=>{var o,f;return m(),p("div",E,[c("div",J,[c("table",K,[c("thead",null,[c("tr",U,[(m(!0),p(w,null,k(e.columns,s=>(m(),p("th",{key:s.key,class:P(["px-6 py-4 text-xs font-semibold text-gray-500 uppercase tracking-wider",s.align==="center"?"text-center":s.align==="right"?"text-right":"text-left"]),style:I({width:s.width})},S(s.title),7))),128))])]),c("tbody",X,[e.loading?(m(),p("tr",Y,[c("td",{colspan:e.columns.length,class:"px-6 py-12 text-center"},[...i[2]||(i[2]=[c("div",{class:"flex flex-col items-center justify-center gap-3"},[c("div",{class:"w-8 h-8 border-3 border-orange-100 border-t-orange-500 rounded-full animate-spin"}),c("span",{class:"text-sm text-gray-400"},"正在加载中...")],-1)])],8,Z)])):e.data.length?(m(!0),p(w,{key:2},k(e.data,(s,d)=>(m(),p("tr",{key:d,class:"group hover:bg-orange-50/30 transition-colors duration-200"},[(m(!0),p(w,null,k(e.columns,y=>(m(),p("td",{key:y.key,class:P(["px-6 py-4 text-sm text-gray-600 whitespace-nowrap",y.align==="center"?"text-center":y.align==="right"?"text-right":"text-left"])},[M(t.$slots,`column-${y.key}`,{row:s,index:d},()=>[V(S(s[y.key]),1)],!0)],2))),128))]))),128)):(m(),p("tr",ee,[c("td",{colspan:e.columns.length,class:"px-6 py-12 text-center"},[c("div",ae,[c("div",ne,[O(B($))]),i[3]||(i[3]=c("span",{class:"text-sm text-gray-400"},"暂无数据",-1))])],8,te)]))])])]),c("div",se,[c("div",re,[c("button",{class:"px-3 py-1.5 text-sm border border-gray-200 rounded-lg bg-white text-gray-600 hover:bg-gray-50 hover:border-orange-200 disabled:opacity-50 disabled:cursor-not-allowed transition-all",disabled:((o=e.pagination)==null?void 0:o.page)===1,onClick:i[0]||(i[0]=s=>{var d;return u(((d=e.pagination)==null?void 0:d.page)-1)})}," 上一页 ",8,oe),c("span",ie,S((f=e.pagination)==null?void 0:f.page),1),c("button",{class:"px-3 py-1.5 text-sm border border-gray-200 rounded-lg bg-white text-gray-600 hover:bg-gray-50 hover:border-orange-200 disabled:opacity-50 disabled:cursor-not-allowed transition-all",disabled:!e.hasMore,onClick:i[1]||(i[1]=s=>{var d;return l(((d=e.pagination)==null?void 0:d.page)+1)})}," 下一页 ",8,le)])])])}}}),xe=N(ce,[["__scopeId","data-v-c3415fb5"]]);export{xe as D,ye as a,ge as b,pe as c,me as d,R as i,H as t,be as u,he as w};
