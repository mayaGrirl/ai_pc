import{U as g}from"./UserLayout-DBXWqJRQ.js";import{i as h,j as y}from"./customer-d1THJ1kK.js";import{d as b,o as k,x as j,w,r as c,g as l,f as e,c as i,j as _,t as r,F as m}from"./index-DQGUWJIM.js";import{_ as x}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./MainLayout-DIJluQjy.js";const C={class:"welfare-page"},B={class:"welfare-modal"},R={class:"modal-header"},D={class:"header-icons"},L={class:"icon-amount"},F={class:"modal-body"},S={key:0,class:"loading-state"},U={key:1,class:"rule-list"},W={class:"col-level"},$=["src"],E={class:"col-amount coin"},I={class:"col-rule"},M={class:"verify-section"},N=["disabled"],V=b({__name:"Welfare",setup(q){const d=c([]),u=c(!0),o=c(0),v=c(10),n=c(!1),p=async()=>{u.value=!0;try{const a=await h();if(a.code===200&&a.data){d.value=a.data.options||[],v.value=a.data.limit||10;let s=0;a.data.limit>a.data.receive_count&&(s=a.data.limit-a.data.receive_count),o.value=s}}catch(a){console.error("åŠ è½½æ•‘æµæ•°æ®å¤±è´¥",a)}finally{u.value=!1}},f=async()=>{if(o.value<1){alert("ä»Šæ—¥é¢†å–æ¬¡æ•°å·²ç”¨å®Œ");return}if(!n.value){n.value=!0;try{const a=await y();a.code===200?(alert(a.message||"é¢†å–æˆåŠŸ"),o.value=o.value-1):alert(a.message||"é¢†å–å¤±è´¥")}catch{alert("é¢†å–å¤±è´¥")}finally{n.value=!1}}};return k(()=>{p()}),(a,s)=>(l(),j(g,null,{default:w(()=>[e("div",C,[s[2]||(s[2]=e("div",{class:"page-tabs"},[e("span",{class:"tab active"},"é¢†æ•‘æµ")],-1)),e("div",B,[e("div",R,[e("div",D,[(l(!0),i(m,null,_(d.value,t=>(l(),i("span",{key:t.level,class:"amount-icon"},[s[0]||(s[0]=e("span",{class:"icon-bag"},"ğŸ",-1)),e("span",L,r(t.day_jiuji_point),1)]))),128))])]),e("div",F,[u.value?(l(),i("div",S,"åŠ è½½ä¸­...")):(l(),i("div",U,[s[1]||(s[1]=e("div",{class:"rule-header"},[e("span",{class:"col-level"},"ç­‰çº§"),e("span",{class:"col-amount"},"æ•‘æµé‡‘"),e("span",{class:"col-rule"},"é¢†å–æ¡ä»¶")],-1)),(l(!0),i(m,null,_(d.value,t=>(l(),i("div",{key:t.level,class:"rule-item"},[e("span",W,[e("img",{src:`/skin/pc/wm/images/level/${t.level}.png`,width:"20"},null,8,$)]),e("span",E,r(t.day_jiuji_point),1),e("span",I,"é‡‘è±†â‰¤"+r(t.day_jiuji_point)+"æ—¶å¯é¢†å–ï¼Œæ¯æ—¥"+r(v.value)+"æ¬¡",1)]))),128))])),e("div",M,[e("button",{class:"btn-claim",onClick:f,disabled:n.value||o.value<1},r(n.value?"é¢†å–ä¸­...":`ç«‹å³é¢†å–ï¼ˆå‰©ä½™${o.value}æ¬¡ï¼‰`),9,N)])])])])]),_:1}))}}),K=x(V,[["__scopeId","data-v-05b2e9dd"]]);export{K as default};
