import{U as m}from"./UserLayout-CR6MC7m4.js";import{p as C,d as w}from"./customer-BGozHksy.js";import{d as x,o as D,y as B,w as F,f as e,c as i,e as f,g as y,F as _,r as u,t as s,p as c,n as b,s as L}from"./index-GTHveaWT.js";import"./MainLayout-CGdiHKEM.js";const N={class:"detail-page"},$={class:"page-tabs"},z=["onClick"],R={class:"records-table"},S={class:"time"},T={key:0},U={key:0,class:"pagination"},V=["disabled"],E={class:"page-info"},I=x({__name:"Detail",setup(M){const d=u("account"),h=[{key:"account",name:"我的账户"},{key:"income",name:"获取明细"},{key:"expense",name:"消费明细"}],l=u([]),p=u(!1),o=u({page:1,size:20}),v=[{id:1,type:"游戏下注",balance:104779079,change:-1e3,after:104778079,time:"26-01-15 19:25"},{id:2,type:"游戏下注",balance:104780079,change:-2160,after:104778079,time:"26-01-15 17:50"},{id:3,type:"游戏下注",balance:104782239,change:-1e3,after:104782235,time:"26-01-15 17:17"},{id:4,type:"游戏中奖",balance:104763235,change:19600,after:104782235,time:"26-01-15 17:02"},{id:5,type:"游戏下注",balance:104773235,change:-1e4,after:104763239,time:"26-01-15 16:59"}],r=async()=>{p.value=!0;try{if(d.value==="account"||d.value==="income"){const t=await C({pagination:o.value});t.code===200&&t.data&&(l.value=t.data.map(a=>({id:a.id,type:a.type_name||a.type,balance:a.balance||a.before,change:a.change||a.amount,after:a.after||a.balance,time:a.created_at||a.time})))}else{const t=await w({pagination:o.value});t.code===200&&t.data&&(l.value=t.data.map(a=>({id:a.id,type:a.type_name||a.type,balance:a.balance||a.before,change:a.change||a.amount,after:a.after||a.balance,time:a.created_at||a.time})))}l.value.length===0&&(l.value=v)}catch(t){console.error("Failed to load records:",t),l.value=v}finally{p.value=!1}},k=t=>{d.value=t,o.value.page=1,r()},g=t=>(t==null?void 0:t.toLocaleString())||"0";return D(()=>{r()}),(t,a)=>(c(),B(m,null,{default:F(()=>[e("div",N,[e("div",$,[(c(),i(_,null,y(h,n=>e("span",{key:n.key,class:b(["tab",{active:d.value===n.key}]),onClick:j=>k(n.key)},s(n.name),11,z)),64))]),e("div",R,[e("table",null,[a[3]||(a[3]=e("thead",null,[e("tr",null,[e("th",null,"类型"),e("th",null,"余额"),e("th",null,"变动"),e("th",null,"变动后"),e("th",null,"时间")])],-1)),e("tbody",null,[(c(!0),i(_,null,y(l.value,n=>(c(),i("tr",{key:n.id},[e("td",null,s(n.type),1),e("td",null,s(g(n.balance)),1),e("td",{class:b(n.change>=0?"positive":"negative")},s(n.change>=0?"+":"")+s(g(n.change)),3),e("td",null,s(g(n.after)),1),e("td",S,s(n.time),1)]))),128)),l.value.length===0&&!p.value?(c(),i("tr",T,[...a[2]||(a[2]=[e("td",{colspan:"5",class:"empty-cell"},"暂无记录",-1)])])):f("",!0)])])]),l.value.length>0?(c(),i("div",U,[e("button",{class:"btn-page",disabled:o.value.page===1,onClick:a[0]||(a[0]=n=>{o.value.page--,r()})},"上一页",8,V),e("span",E,"第 "+s(o.value.page)+" 页",1),e("button",{class:"btn-page",onClick:a[1]||(a[1]=n=>{o.value.page++,r()})},"下一页")])):f("",!0)])]),_:1}))}}),J=L(I,[["__scopeId","data-v-6ad3c696"]]);export{J as default};
