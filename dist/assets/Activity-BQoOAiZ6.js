import{M as w,d as C}from"./MainLayout-rB-7dyln.js";import{d as B,B as T,o as $,x as M,w as A,r,g as i,f as s,n as d,c as o,e as g,F as f,j as E,t as u,q as y}from"./index-CpMdb0R9.js";import{_ as L}from"./_plugin-vue_export-helper-DlAUqK2U.js";const S={class:"activity-container"},V={class:"activity-tabs"},N={class:"activity-list"},F={key:0,class:"loading-state"},H={class:"activity-image"},I=["src","alt"],j={class:"activity-content"},q={class:"activity-title"},z={class:"activity-time"},D={class:"activity-intro"},G=["innerHTML"],J=["onClick"],K={key:0},O={key:1},P={class:"activity-stamp"},Q={key:0,class:"empty-state"},R=B({__name:"Activity",setup(U){const n=r("ongoing"),l=r([]),v=r(!1),c=r(new Set),k=a=>{switch(a){case"ongoing":return"0";case"ended":return"1";case"preview":return"-1";default:return"0"}},p=async()=>{v.value=!0;try{const a=k(n.value),t=await C(a);t.code===200&&t.data?l.value=t.data:l.value=[]}catch(a){console.error("获取活动列表失败:",a),l.value=[]}finally{v.value=!1}},h=a=>{const t=a.start_at||"",e=a.end_at||"长期";return t&&e?`${t.split(" ")[0]}至${e==="长期"?e:e.split(" ")[0]}`:"长期有效"},x=()=>{switch(n.value){case"ongoing":return"进行中";case"ended":return"已结束";case"preview":return"未开始";default:return"进行中"}},b=a=>{c.value.has(a)?c.value.delete(a):c.value.add(a)},_=a=>c.value.has(a);return T(n,()=>{p()}),$(()=>{p()}),(a,t)=>(i(),M(w,null,{default:A(()=>[s("div",S,[s("div",V,[s("span",{class:d(["tab-item",{active:n.value==="ongoing"}]),onClick:t[0]||(t[0]=e=>n.value="ongoing")},"进行中的活动",2),s("span",{class:d(["tab-item",{active:n.value==="ended"}]),onClick:t[1]||(t[1]=e=>n.value="ended")},"已结束的活动",2),s("span",{class:d(["tab-item",{active:n.value==="preview"}]),onClick:t[2]||(t[2]=e=>n.value="preview")},"活动预告",2)]),s("div",N,[v.value?(i(),o("div",F,[...t[3]||(t[3]=[s("p",null,"加载中...",-1)])])):(i(),o(f,{key:1},[(i(!0),o(f,null,E(l.value,e=>{var m;return i(),o("div",{key:e.id,class:"activity-item"},[s("div",H,[s("img",{src:e.pc_pic||e.pic,alt:e.title},null,8,I)]),s("div",j,[s("h3",q,u(e.title),1),s("p",z,[t[4]||(t[4]=s("span",{class:"label"},"活动时间：",-1)),y(u(h(e)),1)]),s("p",D,[t[5]||(t[5]=s("span",{class:"label"},"活动简介：",-1)),y(u((m=e.content)==null?void 0:m.replace(/<[^>]+>/g,"").substring(0,100))+"...",1)]),_(e.id)?(i(),o("div",{key:0,class:"activity-detail",innerHTML:e.content},null,8,G)):g("",!0),s("button",{type:"button",class:"expand-btn",onClick:W=>b(e.id)},[_(e.id)?(i(),o("span",O,"❮ 收起")):(i(),o("span",K,"❯ 展开更多"))],8,J)]),s("div",P,[s("div",{class:d(["stamp",n.value])},u(x()),3)])])}),128)),l.value.length===0?(i(),o("div",Q,[...t[6]||(t[6]=[s("p",null,"暂无活动",-1)])])):g("",!0)],64))])])]),_:1}))}}),tt=L(R,[["__scopeId","data-v-b76095e9"]]);export{tt as default};
