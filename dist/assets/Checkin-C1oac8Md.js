import{U as j}from"./UserLayout-C3Nh_Hmk.js";import{s as S,a as q}from"./customer-Cn_6DRwd.js";import{d as A,o as B,r as p,c as I,w as R,a as i,f as s,q as c,t as n,j as y,g as m,h as w,n as U,F as h}from"./index-cwfplW64.js";import{_ as Y}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./MainLayout-DWWz-nA_.js";const z={class:"checkin-page"},L={class:"checkin-stats"},N={class:"highlight"},T={class:"highlight"},V={class:"checkin-content"},E={class:"calendar-section"},O={class:"calendar-header"},G={class:"month-title"},H={class:"calendar-days"},J={class:"consecutive-info"},K={class:"days"},P={class:"days"},Q={class:"recent-section"},W={class:"recent-table"},X={class:"table-body"},Z={class:"user"},$={class:"reward"},ss={class:"amount"},as=A({__name:"Checkin",setup(ts){const o=p({todayCount:184,totalAmount:4118.85,consecutiveDays:22,currentReward:10}),d=p(new Date),l=y(()=>d.value.getFullYear()),u=y(()=>d.value.getMonth()+1),v=p([1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19]),g=new Date().getDate(),_=p([{user:"sg48182",reward:60,amount:20,time:"8分钟前"},{user:"sgdjhjdjhx",reward:140,amount:70,time:"7分钟前"},{user:"sg48805",reward:175,amount:20,time:"12分钟前"},{user:"sg45899",reward:10,amount:2,time:"12分钟前"},{user:"sg45640",reward:200,amount:10,time:"13分钟前"},{user:"syedjzei",reward:150,amount:5,time:"14分钟前"},{user:"sg45596",reward:700,amount:35,time:"14分钟前"},{user:"sq2888888",reward:400,amount:5,time:"16分钟前"},{user:"sq48783",reward:3,amount:2,time:"17分钟前"},{user:"sq48044",reward:420,amount:140,time:"18分钟前"}]),b=(t,a)=>new Date(t,a,0).getDate(),D=(t,a)=>new Date(t,a-1,1).getDay(),f=y(()=>{const t=[],a=D(l.value,u.value),e=b(l.value,u.value);for(let r=0;r<a;r++)t.push(null);for(let r=1;r<=e;r++)t.push(r);return t}),k=()=>{d.value=new Date(l.value,u.value-2,1)},C=()=>{d.value=new Date(l.value,u.value,1)},x=async()=>{try{const t=await q();t.code===200?(v.value.push(g),alert("签到成功！")):alert(t.message||"签到失败")}catch(t){console.error("Sign in error:",t),v.value.includes(g)||(v.value.push(g),alert("签到成功！"))}},M=t=>t?v.value.includes(t):!1,F=t=>{if(!t)return!1;const a=new Date;return t===a.getDate()&&u.value===a.getMonth()+1&&l.value===a.getFullYear()};return B(async()=>{try{const t=await S();t.code===200&&t.data&&(o.value={todayCount:t.data.today_count||o.value.todayCount,totalAmount:t.data.total_amount||o.value.totalAmount,consecutiveDays:t.data.consecutive_days||o.value.consecutiveDays,currentReward:t.data.current_reward||o.value.currentReward})}catch(t){console.error("Failed to load sign stats:",t)}}),(t,a)=>(i(),I(j,null,{default:R(()=>[s("div",z,[a[10]||(a[10]=s("div",{class:"page-tabs"},[s("span",{class:"tab active"},"签到")],-1)),s("div",L,[a[0]||(a[0]=c(" 今日签到 ",-1)),s("span",N,n(o.value.todayCount),1),a[1]||(a[1]=c(" 人， 累计送出 ",-1)),s("span",T,n(o.value.totalAmount),1),a[2]||(a[2]=c(" 元 ",-1)),a[3]||(a[3]=s("span",{class:"wait-text"},"等待返现",-1))]),s("div",V,[s("div",E,[s("div",O,[s("button",{class:"nav-btn",onClick:k},"<"),s("span",G,n(l.value)+"年 "+n(u.value)+"月",1),s("button",{class:"nav-btn",onClick:C},">")]),a[7]||(a[7]=s("div",{class:"calendar-weekdays"},[s("span",null,"日"),s("span",null,"一"),s("span",null,"二"),s("span",null,"三"),s("span",null,"四"),s("span",null,"五"),s("span",null,"六")],-1)),s("div",H,[(i(!0),m(h,null,w(f.value,(e,r)=>(i(),m("span",{key:r,class:U(["day",{empty:!e,signed:M(e),today:F(e)}])},n(e||""),3))),128))]),s("div",{class:"calendar-action"},[s("button",{class:"btn-signin",onClick:x},"立即签到")]),s("div",J,[a[4]||(a[4]=c(" 连续签到 ",-1)),s("span",K,n(o.value.consecutiveDays),1),a[5]||(a[5]=c(" 天，累计签到 ",-1)),s("span",P,n(o.value.consecutiveDays),1),a[6]||(a[6]=c(" 天 ",-1))])]),s("div",Q,[a[9]||(a[9]=s("div",{class:"recent-header"},"近期签到用户",-1)),s("div",W,[a[8]||(a[8]=s("div",{class:"table-header"},[s("span",null,"会员"),s("span",null,"签到积分"),s("span",null,"获得奖励")],-1)),s("div",X,[(i(!0),m(h,null,w(_.value,e=>(i(),m("div",{key:e.user,class:"table-row"},[s("span",Z,n(e.user),1),s("span",$,n(e.reward),1),s("span",ss,n(e.amount),1)]))),128))])])])]),a[11]||(a[11]=s("div",{class:"checkin-rules"},[s("div",{class:"rules-header"},"签到说明"),s("div",{class:"rules-content"},[s("p",null,"签到13周起，签到积累达7天及以上且昨夜投注10元以上即可每日8元，签到积累多每日8元。"),s("div",{class:"rules-progress"},[s("div",{class:"progress-item"},[s("span",{class:"icon"},"✓"),s("span",null,"签到1次获用赠额的 0.5 %,连续签到天数")]),s("div",{class:"progress-bar"},[s("span",{class:"bar active"}),s("span",{class:"bar active"}),s("span",{class:"bar"}),s("span",{class:"bar"}),s("span",{class:"bar"}),s("span",{class:"bar"}),s("span",{class:"bar"}),s("span",{class:"bar"}),s("span",{class:"bar"}),s("span",{class:"bar"})]),s("div",{class:"progress-label"},"10 *连续签到天数")])])],-1))])]),_:1}))}}),us=Y(as,[["__scopeId","data-v-a1b42f39"]]);export{us as default};
